<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#0a0a1a">
    <title>–ù–ê–ë–õ–Æ–î–ê–¢–ï–õ–¨ - –ò–≥—Ä–∞</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/game.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400;500;700&family=UnifrakturMaguntia&display=swap" rel="stylesheet">
    <style>
    /* –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –§–ò–ö–° –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–• –£–°–¢–†–û–ô–°–¢–í */
    @media (max-width: 768px) {
        html, body {
            height: 100%;
            position: fixed;
            width: 100%;
            overflow: hidden;
            touch-action: pan-y;
        }
        
        .game-container {
            height: 100vh;
            height: -webkit-fill-available;
            max-height: 100vh;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            position: relative;
        }
        
        .text-container {
            -webkit-overflow-scrolling: touch !important;
            overflow-y: auto !important;
        }
    }
    
    /* –§–∏–∫—Å –¥–ª—è –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
    @media (max-width: 400px) {
        .scene-title {
            font-size: 1.3rem !important;
            line-height: 1.3;
        }
        
        .choice-btn {
            padding: 0.8rem !important;
            font-size: 0.9rem !important;
        }
    }
    
    /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è —Å–≤–∞–π–ø–∞ */
    @keyframes fadeOutSwipe {
        0% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        100% { opacity: 0; transform: translate(-50%, -100%) scale(0.5); }
    }
    
    .swipe-feedback {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 3rem;
        color: var(--accent-purple);
        opacity: 0;
        z-index: 1000;
        pointer-events: none;
        animation: fadeOutSwipe 1s ease forwards;
    }
</style>
</head>
<body>
    <!-- –û—Å—Ç–∞–ª—å–Ω–æ–π HTML –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
    <div class="game-container">
        <!-- –ò–≥—Ä–æ–≤–æ–π —Ñ–æ–Ω -->
        <div class="game-bg" id="game-bg">
            <div class="bg-overlay"></div>
            <div class="bg-particles"></div>
        </div>
        
        <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å (—Å—Ç–∞—Ç—É—Å) -->
        <header class="game-header">
            <div class="status-bar">
                <div class="resource-display">
                    <div class="resource">
                        <span class="resource-icon">‚è≥</span>
                        <span class="resource-label">OT:</span>
                        <div class="resource-bar">
                            <div class="bar-fill" id="ot-bar" style="width: 100%"></div>
                        </div>
                        <span class="resource-value" id="ot-value">100</span>
                    </div>
                    
                    <div class="resource">
                        <span class="resource-icon">üõ°</span>
                        <span class="resource-label">–ó–†:</span>
                        <div class="resource-bar">
                            <div class="bar-fill" id="zr-bar" style="width: 100%"></div>
                        </div>
                        <span class="resource-value" id="zr-value">100</span>
                    </div>
                </div>
                
                <button class="menu-toggle" id="menu-toggle">
                    <span>‚ò∞</span>
                </button>
            </div>
            
            <!-- –°–∫—Ä—ã—Ç–∞—è –ø–∞–Ω–µ–ª—å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ -->
            <div class="parameters-panel" id="parameters-panel">
                <div class="parameter">
                    <span class="param-label">–°–û–ó–ò–î–ê–ù–ò–ï:</span>
                    <div class="param-bar">
                        <div class="bar-fill" id="soz-bar" style="width: 0%"></div>
                    </div>
                    <span class="param-value" id="soz-value">0</span>
                </div>
                <div class="parameter">
                    <span class="param-label">–°–í–Ø–ó–¨:</span>
                    <div class="param-bar">
                        <div class="bar-fill" id="svyaz-bar" style="width: 0%"></div>
                    </div>
                    <span class="param-value" id="svyaz-value">0</span>
                </div>
                <div class="parameter">
                    <span class="param-label">–†–ê–°–ü–ê–î:</span>
                    <div class="param-bar">
                        <div class="bar-fill" id="raspad-bar" style="width: 0%"></div>
                    </div>
                    <span class="param-value" id="raspad-value">0</span>
                </div>
            </div>
        </header>
        
        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å - —Ç–µ–∫—Å—Ç —Å—Ü–µ–Ω—ã -->
        <main class="game-main">
            <div class="scene-container">
                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ü–µ–Ω—ã -->
                <div class="scene-header" id="scene-header">
                    <h2 class="scene-title" id="scene-title"></h2>
                    <div class="scene-meta" id="scene-meta"></div>
                </div>
                
                <!-- –¢–µ–∫—Å—Ç —Å—Ü–µ–Ω—ã -->
                <div class="text-container">
                    <div class="text-content" id="text-content">
                        <!-- –¢–µ–∫—Å—Ç –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>
                
                <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è (–ø–æ–¥ —Ç–µ–∫—Å—Ç–æ–º) -->
                <div class="continue-indicator" id="continue-indicator">
                    <div class="continue-text">‚Üì</div>
                    <div class="continue-label">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</div>
                </div>
                
                <!-- –í—ã–±–æ—Ä—ã -->
                <div class="choices-container" id="choices-container">
                    <!-- –ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>
            
            <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–≤–∞–π–ø–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö -->
            <div class="mobile-swipe-indicator" id="mobile-swipe-indicator">
                <div class="swipe-arrow">‚Üë</div>
                <div class="swipe-text">–°–≤–∞–π–ø –≤–≤–µ—Ä—Ö –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è</div>
            </div>
            
            <!-- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å (–±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å) -->
            <aside class="inventory-panel" id="inventory-panel">
                <div class="inventory-header">
                    <h3>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h3>
                    <button class="inventory-close" id="inventory-close">√ó</button>
                </div>
                <div class="inventory-items" id="inventory-items">
                    <div class="empty-inventory">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç</div>
                </div>
            </aside>
        </main>
        
        <!-- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <footer class="game-footer">
            <div class="control-panel">
                <button class="control-btn" id="btn-save" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å">
                    <span class="btn-icon">üíæ</span>
                    <span class="btn-label">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</span>
                </button>
                
                <button class="control-btn" id="btn-load" title="–ó–∞–≥—Ä—É–∑–∏—Ç—å">
                    <span class="btn-icon">üìÇ</span>
                    <span class="btn-label">–ó–∞–≥—Ä—É–∑–∏—Ç—å</span>
                </button>
                
                <button class="control-btn" id="btn-auto" title="–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —á—Ç–µ–Ω–∏–µ">
                    <span class="btn-icon">‚ñ∂</span>
                    <span class="btn-label">–ê–≤—Ç–æ</span>
                </button>
                
                <button class="control-btn" id="btn-skip" title="–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –¥–æ –≤—ã–±–æ—Ä–∞">
                    <span class="btn-icon">‚è©</span>
                    <span class="btn-label">–ü—Ä–æ–ø—É—Å–∫</span>
                </button>
                
                <button class="control-btn" id="btn-menu" title="–ú–µ–Ω—é">
                    <span class="btn-icon">‚öô</span>
                    <span class="btn-label">–ú–µ–Ω—é</span>
                </button>
            </div>
        </footer>
        
        <!-- –ú–µ–Ω—é –∏–≥—Ä—ã -->
        <div class="game-menu-overlay" id="game-menu-overlay"></div>
        <div class="game-menu" id="game-menu">
            <div class="game-menu-header">
                <h2>–ú–µ–Ω—é –∏–≥—Ä—ã</h2>
                <button class="game-menu-close" id="game-menu-close">√ó</button>
            </div>
            <div class="game-menu-body">
                <div class="menu-section">
                    <h3>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                    <button class="menu-action" id="menu-save">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–≥—Ä—É</button>
                    <button class="menu-action" id="menu-load">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–≥—Ä—É</button>
                    <button class="menu-action" id="menu-settings">‚öô –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    <button class="menu-action" id="menu-main">üè† –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</button>
                </div>
                
                <div class="menu-section">
                    <h3>–°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã</h3>
                    <div class="status-display">
                        <div class="status-item">
                            <span>–¢–µ–∫—É—â–∞—è —Å—Ü–µ–Ω–∞:</span>
                            <span id="menu-current-scene">-</span>
                        </div>
                        <div class="status-item">
                            <span>–í—Ä–µ–º—è –∏–≥—Ä—ã:</span>
                            <span id="menu-play-time">-</span>
                        </div>
                        <div class="status-item">
                            <span>–°–¥–µ–ª–∞–Ω–æ –≤—ã–±–æ—Ä–æ–≤:</span>
                            <span id="menu-choices-count">-</span>
                        </div>
                    </div>
                </div>
                
                <div class="menu-section">
                    <h3>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è</h3>
                    <div class="save-slots" id="game-save-slots">
                        <!-- –°–ª–æ—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –î–∏–∞–ª–æ–≥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–∑–∞–≥—Ä—É–∑–∫–∏ -->
        <div class="save-modal" id="save-modal">
            <div class="save-modal-header">
                <h2 id="save-modal-title">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–≥—Ä—É</h2>
                <button class="save-modal-close" id="save-modal-close">√ó</button>
            </div>
            <div class="save-modal-body">
                <div class="save-slots-grid" id="save-slots-grid">
                    <!-- –°–ª–æ—Ç—ã –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
                <div class="save-modal-actions">
                    <button class="save-action" id="save-action">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button class="cancel-action" id="cancel-save">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>
        
        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
        <div class="notification-container" id="notification-container">
            <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
        </div>
    </div>
    
    <!-- –ó–∞–≥—Ä—É–∑—á–∏–∫ -->
    <div class="loader" id="loader">
        <div class="loader-spinner"></div>
        <div class="loader-text">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ü–µ–Ω—ã...</div>
    </div>
    
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º JavaScript -->
    <script src="js/touch-fix.js"></script>
    <script src="js/mobile-scroll-fix.js"></script>
    <script src="js/hide-hotbar.js"></script>
    <script src="js/game.js"></script>
</body>
</html>